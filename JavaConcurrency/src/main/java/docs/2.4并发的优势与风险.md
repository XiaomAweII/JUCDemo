# 并发的优势与风险

## 优势

速度：同时处理多个请求，等待时间变短，响应更快；复杂的操作可以分成多个进程同时进行。

设计：程序设计在某些情况下更简单，也可以有更多的选择。
> 假设一个应用程序需要从本地系统中读取和处理两个文件，如果你想编写程序，手动处理读取和处理的顺序的时候，你就必须记录每个文件的读取和处理的状态。相反，如果使用多线程并发处理，你就可以启动两个线程，每个线程处理一个文件的读取和操作。线程会在等待磁盘读取文件的过程中被阻塞，在等待的时候，其他的线程能够使用CPU去处理已经读取完的文件。其结果就是，磁盘总是繁忙的读取不同的文件到内存中，这会带来磁盘和CPU利用率的提升。而且每个线程只需要记录一个文件，因此这种方式也很容易编程实现。

资源利用：CPU能够在等待IO的时候做一些其他的事情
> 继续使用上边的例子，需要从本地文件系统中读取或处理文件，从磁盘中读取文件的时候，大部分的CPU时间都会用于等待磁盘去读取数据，在这段时间里CPU非常的空闲，它可以做一些别的事情，通过改变操作顺序，就能够更好的利用CPU资源。总的来说，CPU能够在等待IO的时候做一些其他的事情，这个不一定就是磁盘IO，也可以是网络IO或者用户输入。通常情况下，网络和磁盘的IO比CPU和内存的IO要慢的多。

## 风险

安全性：多个线程共享数据时可能会产生于期望不相符的结果

活跃性：某个操作无法继续进行下去时，就会发生活跃性问题。比如死锁、饥饿等问题
> 比如我们知道多个线程共享数据时，可能会产生与期望不符的结果，因此我们就会尝试通过加锁等来保证我们的结果满足预期。这个时候，如果加锁或者解锁操作不当，或者有异常情况发生，这个时候可能就会引发死锁。

性能：线程过多使用会使得：CPU频繁切换，调度时间增多，同步机制，消耗过多内存
> 线程过多，它会使得CPU频繁的进行切换，花在调度上的时间会增多很多，多线程环境下必须使用同步机制，这导致了很多遍一起想做的优化被抑制。线程过多还会消耗过多的内存。

<hr>

