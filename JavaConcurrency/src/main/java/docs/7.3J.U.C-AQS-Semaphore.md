# Semaphore

## Semaphore基本概念

aqs中的同步组件信号量，类名是Semaphore，之前并发模拟的时候了解过，知道它可以控制并发访问的线程个数，在操作系统里，信号量是一个非常重要的作用，在进程控制方面具有很重要的应用。java并发库里的Semaphore就可以很轻松的完成类似于操作系统里信号量的控制，Semaphore可以很容易的控制某个资源可被同时访问的个数。和CountDownLatch使用有些类似，也是提供了两个核心方法，分别是acquire和release。acquire方法是获取一个许可，如果没有就在那等待，而release则是在操作完成后，释放一个许可出来。Semaphore维护了当前访问的个数，通过提供同步机制来控制同时访问的个数。在数据结构中，列表正常是可以保存无限个节点的，而Semaphore可以实现有限大小的列表，这里重入锁，后面的reentrantLock它其实也可以实现这个功能，但是实现上要复杂，很多代码也要变得复杂一些。

## Semaphore使用场景

Semaphore它常用于仅能提供有限访问的资源，比如，项目中使用的数据库，数据库的连接数，比如它最大只有20，而我们上层应用的并发数可能会远远大于20，如果同时对数据库进行操作就可能会出现因为无法获取数据库连接数而导致异常，这个时候，就可以通过信号量Semaphore来做并发滑动控制，当Semaphore把并发数控制到1的时候，就跟单线程运行很相似了。